<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>STPD Lover</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');

  :root {
    /* Light theme palette */
    --background-color: #ffffff;
    --background-gradient: linear-gradient(135deg, #f8f9fa, #e9ecef, #dee2e6);
    --container-bg: #ffffff;
    --text-primary: #111827; /* dark strong for headings */
    --text-muted: #6b7280; /* neutral gray for body text */
    --lavender-pale: #7c3aed; /* violet accent */
    --button-gradient-start: #7c3aed;
    --button-gradient-end: #a78bfa;
    --button-shadow: rgba(167, 139, 250, 0.5);
    --button-text: #ffffff;
  }

  body[data-theme='dark'] {
    --background-gradient: linear-gradient(135deg, #322940, #5e4266, #7a597f);
    --background-color: transparent;
    --container-bg: rgba(40 28 50 / 0.75);
    --text-primary: #e1cee9;
    --text-muted: #b8a9c9;
    --lavender-pale: #a58faa;
    --button-gradient-start: #5e4266;
    --button-gradient-end: #7a597f;
    --button-shadow: rgba(122 89 127 / 0.7);
    --button-text: #f2eaf7;
  }

  *, *::before, *::after {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    min-height: 100vh;
    background: var(--background-color);
    background-image: var(--background-gradient);
    background-repeat: no-repeat;
    background-attachment: fixed;
    font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    color: var(--text-muted);
    display: flex;
    justify-content: center;
    align-items: center;
    padding: clamp(1rem, 2vw, 2rem);
    transition: background 0.5s ease, color 0.5s ease;
  }

  #container {
    background: var(--container-bg);
    border-radius: 0.75rem;
    padding: clamp(1.5rem, 3vw, 2.5rem);
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    max-width: 420px;
    width: 100%;
    position: relative;
    display: flex;
    flex-direction: column;
    gap: clamp(1rem, 2vw, 1.5rem);
    color: var(--text-primary);
  }

  #header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    gap: 0.75rem;
  }

  h1 {
    margin: 0;
    font-weight: 700;
    font-size: clamp(2.5rem, 5vw + 1rem, 3rem);
    user-select: none;
    flex-grow: 1;
    color: var(--text-primary);
    min-width: 180px;
  }

  #qem {
    display: inline-flex;
    align-items: center;
    font-weight: 700;
    font-size: clamp(1rem, 2vw + 0.5rem, 1.25rem);
    color: var(--lavender-pale);
    user-select: none;
    gap: 0.5rem;
    flex-wrap: nowrap;
  }

  #countValue {
    min-width: 2.25rem;
    text-align: center;
    color: var(--lavender-pale);
  }

  button {
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 0.75rem;
    background: linear-gradient(45deg, var(--button-gradient-start), var(--button-gradient-end));
    color: var(--button-text);
    font-weight: 700;
    cursor: pointer;
    transition: background 0.3s ease, box-shadow 0.3s ease, transform 0.25s ease;
    box-shadow:
      0 0 8px var(--button-shadow),
      0 0 16px var(--button-shadow);
    user-select: none;
  }

  button:hover,
  button:focus {
    background: linear-gradient(45deg, var(--button-gradient-end), var(--button-gradient-start));
    box-shadow:
      0 0 14px var(--button-shadow),
      0 0 28px var(--button-shadow);
    transform: scale(1.05);
    outline: none;
  }

  #result {
    font-size: clamp(1rem, 2vw + 0.25rem, 1.15rem);
    color: var(--text-muted);
    min-height: 1.5em;
    user-select: text;
  }

  input {
    position: absolute;
    opacity: 0;
    width: 1px;
    height: 1px;
    border: none;
    padding: 0;
    margin: 0;
    overflow: hidden;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    background: transparent;
    color: transparent;
    pointer-events: auto;
    caret-color: auto;
  }

  /* Dark mode button: half black half white circle with smooth border */
  #themeToggle {
    position: fixed;
    top: 1rem;
    right: 1rem;
    width: 3rem;
    height: 3rem;
    border: none;
    border-radius: 50%;
    background:
      linear-gradient(90deg, #000 50%, #fff 50%);
    cursor: pointer;
    box-shadow:
      0 0 8px rgba(0,0,0,0.25),
      inset 0 0 10px rgba(255,255,255,0.6);
    transition: transform 0.3s ease;
    outline-offset: 2px;
  }
  #themeToggle:hover,
  #themeToggle:focus {
    transform: scale(1.1);
    outline: 2px solid #7c3aed;
  }
</style>
</head>
<body>
  <button id="themeToggle" aria-label="Toggle dark mode" role="switch" aria-checked="false"></button>
  <div id="container">
    <div id="header">
      <h1>Love You â™¥&nbsp;</h1>
      <div id="qem">
        <span>QEM Counter:</span>
        <span id="countValue" aria-live="polite" aria-atomic="true">0</span>
        <button onclick="incrementCount()" aria-label="Increment QEM counter">+</button>
      </div>
    </div>
    <div id="result" aria-live="polite" aria-atomic="true"></div>
    <input
      type="text"
      id="urlInput"
      placeholder="Lick Here..."
      oninput="findTaskId()"
      autocomplete="off"
      aria-label="Enter URL to extract task ID"
    />
  </div>

  <script>
    const themeToggle = document.getElementById('themeToggle');
    const body = document.body;

    function loadTheme() {
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        body.setAttribute('data-theme', 'dark');
        themeToggle.setAttribute('aria-checked', 'true');
      } else {
        body.removeAttribute('data-theme');
        themeToggle.setAttribute('aria-checked', 'false');
      }
    }

    themeToggle.addEventListener('click', () => {
      if (body.getAttribute('data-theme') === 'dark') {
        body.removeAttribute('data-theme');
        themeToggle.setAttribute('aria-checked', 'false');
        localStorage.setItem('theme', 'light');
      } else {
        body.setAttribute('data-theme', 'dark');
        themeToggle.setAttribute('aria-checked', 'true');
        localStorage.setItem('theme', 'dark');
      }
    });

    loadTheme();

    let count = 0;

    function findTaskId() {
      const inputElem = document.getElementById("urlInput");
      const url = inputElem.value.trim();
      const resultElem = document.getElementById("result");

      if (url) {
        try {
          const urlParams = new URLSearchParams(new URL(url).search);
          const taskId = urlParams.get("task_ids");

          if (taskId) {
            resultElem.innerText = `For You: ${taskId}`;
            navigator.clipboard.writeText(taskId).then(() => {
              inputElem.value = "";
              resultElem.innerText = "";
            });
          } else {
            resultElem.innerText = "Task ID not found.";
          }
        } catch {
          resultElem.innerText = "Invalid URL.";
        }
      } else {
        resultElem.innerText = "";
      }
    }

    function incrementCount() {
      count++;
      document.getElementById("countValue").innerText = count;
    }

    document.body.addEventListener('click', () => {
      document.getElementById('urlInput').focus();
    });
  </script>
</body>
</html>

